schema: '2.0'
stages:
  data_split:
    cmd: python src/stages/data_split.py --config=params.yaml
    deps:
    - path: data/raw
      md5: b2043a4ab6ea2efbab8a899282a80556.dir
      size: 466827
      nfiles: 2
    - path: src/stages/data_split.py
      md5: aa8ad6b7934b99ce2ba16b8cf31db280
      size: 1441
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          raw_data_dir: data/raw
          countries:
          - France
          - Spain
          feat_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        data_split:
          test_size: 0.25
          processed_data_dir: data/processed
    outs:
    - path: data/processed
      md5: c07ed6d06f67cf681d527874bc0092d8.dir
      size: 722162
      nfiles: 4
  train:
    cmd: python src/stages/train.py --config=params.yaml
    deps:
    - path: data/processed
      md5: c07ed6d06f67cf681d527874bc0092d8.dir
      size: 722162
      nfiles: 4
    - path: src/stages/train.py
      md5: 19dc16bc43cee0b1297108a08674df11
      size: 2141
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          raw_data_dir: data/raw
          countries:
          - France
          - Spain
          feat_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        train:
          model_type: randomforest
          model_dir: models
          model_path: models/clf-model.joblib
          params:
            n_estimators: 100
            max_depth: 10
    outs:
    - path: models/clf-model.joblib
      md5: 1c9a879eabb2d1280893fe10f1343992
      size: 2824584
  eval:
    cmd: python src/stages/eval.py --config=params.yaml
    deps:
    - path: data/processed
      md5: c07ed6d06f67cf681d527874bc0092d8.dir
      size: 722162
      nfiles: 4
    - path: models/clf-model.joblib
      md5: 1c9a879eabb2d1280893fe10f1343992
      size: 2824584
    - path: src/stages/eval.py
      md5: 578a31a0f41c1b9bd9414baa81b4f131
      size: 2457
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          raw_data_dir: data/raw
          countries:
          - France
          - Spain
          feat_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        data_split:
          test_size: 0.25
          processed_data_dir: data/processed
        train:
          model_type: randomforest
          model_dir: models
          model_path: models/clf-model.joblib
          params:
            n_estimators: 100
            max_depth: 10
    outs:
    - path: metrics.json
      md5: 16294e89df3305c5ed3915e84f50e13d
      size: 65
    - path: reports/feat_imp.csv
      md5: abe6c5eb6d7d39ca105bb4376f60511f
      size: 186
    - path: reports/figures/cm.png
      md5: 2f8facd13613a05b64a2a58ecb171839
      size: 10374
